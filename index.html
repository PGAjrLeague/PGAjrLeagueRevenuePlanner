<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PGA Jr. League Program Planner & Revenue Calculator</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="shortcut icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #1e3a5f 0%, #2c5282 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .calculator-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
            margin-bottom: 30px;
            animation: slideUp 0.5s ease-out;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-align: center;
            background: linear-gradient(135deg, #1e3a5f, #2c5282);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            color: #666;
            text-align: center;
            margin-bottom: 40px;
            font-size: 1.1em;
        }
        
        .section-title {
            color: #1e3a5f;
            font-size: 1.6em;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .input-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .input-section {
                grid-template-columns: 1fr;
            }
        }
        
        .input-group {
            position: relative;
        }
        
        label {
            display: block;
            color: #555;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
        
        .hint-text {
            color: #666;
            font-size: 0.85em;
            margin-bottom: 8px;
            font-weight: normal;
            font-style: italic;
        }
        
        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }
        
        .currency-symbol {
            position: absolute;
            left: 15px;
            color: #999;
            font-size: 1.2em;
            font-weight: 500;
            pointer-events: none;
        }
        
        input[type="number"], input[type="email"], select {
            width: 100%;
            padding: 15px;
            padding-left: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            color: #333;
            transition: all 0.3s ease;
            background: #f9f9f9;
        }
        
        input.with-currency {
            padding-left: 35px;
        }
        
        input[type="number"]:focus, input[type="email"]:focus, select:focus {
            outline: none;
            border-color: #1e3a5f;
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30, 58, 95, 0.2);
        }
        
        .results-section {
            background: linear-gradient(135deg, #1e3a5f, #2c5282);
            border-radius: 15px;
            padding: 30px;
            color: white;
            margin-top: 30px;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .result-item {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
        }
        
        .result-item:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
        }
        
        .result-item.highlight {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .result-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .result-value {
            font-size: 2em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .breakdown-section {
            margin-top: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            color: #333;
        }
        
        .breakdown-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #1e3a5f;
        }
        
        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .breakdown-item:last-child {
            border-bottom: none;
        }
        
        .breakdown-label {
            color: #666;
        }
        
        .breakdown-value {
            font-weight: 600;
            color: #333;
        }
        
        .info-banner {
            background: #e8f1f8;
            border-left: 4px solid #1e3a5f;
            padding: 15px;
            margin-top: 30px;
            border-radius: 5px;
        }
        
        .info-banner h3 {
            color: #1e3a5f;
            margin-bottom: 10px;
        }
        
        .info-banner p {
            color: #666;
            line-height: 1.6;
        }
        
        .warning-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            color: #856404;
        }
        
        .success-box {
            background: #d4edda;
            border: 2px solid #28a745;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            color: #155724;
        }
        
        .expenses-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
        }
        
        .expenses-section h2 {
            color: #1e3a5f;
            margin-bottom: 25px;
            font-size: 1.8em;
        }
        
        .recommendation-box {
            background: #d1ecf1;
            border: 2px solid #17a2b8;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            color: #0c5460;
        }
        
        .practice-guide {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            border: 2px solid #1e3a5f;
        }
        
        .practice-guide h3 {
            color: #1e3a5f;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        
        .week-item {
            padding: 15px;
            margin-bottom: 15px;
            background: white;
            border-radius: 10px;
            border-left: 4px solid #2c5282;
        }
        
        .week-title {
            color: #1e3a5f;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .week-description {
            color: #666;
            line-height: 1.6;
        }
        
        .email-section {
            background: #e8f1f8;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            text-align: center;
        }
        
        .email-button {
            background: linear-gradient(135deg, #1e3a5f, #2c5282);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            margin-top: 15px;
        }
        
        .email-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(30, 58, 95, 0.3);
        }
        
        .summary-text {
            color: #1e3a5f;
            font-weight: 600;
            font-size: 1.1em;
            margin: 10px 0;
        }
        
        .assistant-coaches-section {
            background: #f0f6fc;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .add-coach-btn {
            background: #1e3a5f;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .remove-coach-btn {
            background: #dc3545;
            color: white;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="calculator-container">
            <h1>PGA Jr. League Program Planner & Revenue Calculator</h1>
            <p class="subtitle">Plan your program and calculate optimal pricing for your junior golf program</p>
            
            <!-- Program Planning Section -->
            <h2 class="section-title">📅 Program Planning</h2>
            <div class="input-section">
                <div class="input-group">
                    <label for="studentRatio">Student to Coach Ratio</label>
                    <p class="hint-text">We recommend 6:1 for optimal instruction</p>
                    <div class="input-wrapper">
                        <input type="number" id="studentRatio" min="1" max="15" value="6" step="1">
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="leadCoachRate">Lead Coach Hourly Rate</label>
                    <p class="hint-text">Your target hourly rate</p>
                    <div class="input-wrapper">
                        <span class="currency-symbol">$</span>
                        <input type="number" id="leadCoachRate" min="0" max="500" value="75" step="5" class="with-currency">
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="practiceDuration">Practice Duration</label>
                    <p class="hint-text">Typical practice is about 1 hour</p>
                    <p style="color: #888; font-size: 0.8em; margin-top: 5px; line-height: 1.4;">
                        If you plan on hosting multiple teams/divisions on the same day, be sure to reflect that here.<br>
                        <strong>ADM Guidelines:</strong> 9u - 45 min (fun-focused) | 13u - 30-60 min | 17u - 45-90 min
                    </p>
                    <div class="input-wrapper">
                        <select id="practiceDuration">
                            <option value="0.5">30 minutes</option>
                            <option value="0.583">35 minutes</option>
                            <option value="0.667">40 minutes</option>
                            <option value="0.75">45 minutes</option>
                            <option value="0.833">50 minutes</option>
                            <option value="0.917">55 minutes</option>
                            <option value="1" selected>1 hour</option>
                            <option value="1.083">1 hour 5 min</option>
                            <option value="1.167">1 hour 10 min</option>
                            <option value="1.25">1 hour 15 min</option>
                            <option value="1.333">1 hour 20 min</option>
                            <option value="1.417">1 hour 25 min</option>
                            <option value="1.5">1 hour 30 min</option>
                            <option value="1.583">1 hour 35 min</option>
                            <option value="1.667">1 hour 40 min</option>
                            <option value="1.75">1 hour 45 min</option>
                            <option value="1.833">1 hour 50 min</option>
                            <option value="1.917">1 hour 55 min</option>
                            <option value="2">2 hours</option>
                        </select>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="gameDuration">Game Day Duration</label>
                    <p class="hint-text">Typical game day is about 3 hours</p>
                    <div class="input-wrapper">
                        <select id="gameDuration">
                            <option value="2">2 hours</option>
                            <option value="2.25">2 hours 15 min</option>
                            <option value="2.5">2 hours 30 min</option>
                            <option value="2.75">2 hours 45 min</option>
                            <option value="3" selected>3 hours</option>
                            <option value="3.25">3 hours 15 min</option>
                            <option value="3.5">3 hours 30 min</option>
                            <option value="3.75">3 hours 45 min</option>
                            <option value="4">4 hours</option>
                            <option value="4.25">4 hours 15 min</option>
                            <option value="4.5">4 hours 30 min</option>
                            <option value="4.75">4 hours 45 min</option>
                            <option value="5">5 hours</option>
                            <option value="5.25">5 hours 15 min</option>
                            <option value="5.5">5 hours 30 min</option>
                            <option value="5.75">5 hours 45 min</option>
                            <option value="6">6 hours</option>
                        </select>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="totalPractices">Total Practices in Program</label>
                    <p class="hint-text">Total number of practice sessions</p>
                    <p style="color: #888; font-size: 0.8em; margin-top: 5px; line-height: 1.4;">
                        The typical PGA Jr. League program will practice once a week. Feel free to meet more or less often as you see fit! Don't forget to account for team meetings!
                    </p>
                    <div class="input-wrapper">
                        <input type="number" id="totalPractices" min="0" max="100" value="8" step="1">
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="totalGameDays">Total Game Days in Program</label>
                    <p class="hint-text">Total number of game days</p>
                    <p style="color: #888; font-size: 0.8em; margin-top: 5px; line-height: 1.4;">
                        The typical PGA Jr. League program will have a game day once a week. Feel free to increase or decrease this.
                    </p>
                    <div class="input-wrapper">
                        <input type="number" id="totalGameDays" min="0" max="100" value="8" step="1">
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="weeksInProgram">Weeks in Program</label>
                    <p class="hint-text">Typical program is anywhere from 6-10 weeks. Feel free to adjust that up or down!</p>
                    <div class="input-wrapper">
                        <input type="number" id="weeksInProgram" min="1" max="52" value="8" step="1">
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="onlinePayment">Collecting Fees Online?</label>
                    <p class="hint-text">Online payments typically charge 3% processing</p>
                    <div class="input-wrapper">
                        <select id="onlinePayment">
                            <option value="no">No - Collecting by cash/check</option>
                            <option value="yes">Yes - Using online payment system</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- Online Payment Processing Notice -->
            <div id="processingFeeNotice" class="info-banner" style="display: none; background: #fff3cd; border-left-color: #ffc107;">
                <h3 style="color: #856404;">💳 Online Processing Fee Adjustment</h3>
                <p style="color: #856404;">
                    Online payment processors typically charge <strong>3% per transaction</strong>.<br>
                    To maintain your target revenue, consider increasing your fee by 3%:<br>
                    <strong>Adjusted Fee: <span id="adjustedFeeAmount">$0</span></strong> (instead of <span id="originalFeeAmount">$0</span>)<br>
                    <span style="font-size: 0.9em;">This covers the <span id="processingCostAmount">$0</span> in processing fees for your program.</span>
                </p>
            </div>
            
            <!-- Assistant Coaches Section -->
            <div class="assistant-coaches-section">
                <h3 style="color: #1e3a5f; margin-bottom: 15px;">Assistant Coaches (Optional)</h3>
                <div id="assistantCoachesList"></div>
                <button class="add-coach-btn" onclick="addAssistantCoach()">+ Add Assistant Coach</button>
                <p style="color: #666; font-size: 0.85em; margin-top: 10px; font-style: italic;">
                    <strong>Helpful Hint:</strong> If you want to pay an assistant coach a flat rate per session, use the Misc. Expenses box down below
                </p>
            </div>
            
            <!-- Team Recommendation -->
            <div id="teamRecommendation" class="recommendation-box" style="display: none;">
                <h3>💡 Team Recommendation</h3>
                <p id="teamRecommendationText"></p>
            </div>
            
            <!-- Program Capacity -->
            <div id="capacityInfo" class="info-banner">
                <h3>📊 Program Capacity</h3>
                <p>Based on your staffing: <strong><span id="maxStudents">6</span> students maximum</strong> (<span id="numCoachesDisplay">1</span> coach × <span id="ratioDisplay">6</span>:1 ratio)</p>
                <p>Total practice hours: <strong><span id="totalPracticeHours">8</span> hours</strong> (<span id="numPractices">8</span> practices × <span id="practiceLength">1</span> hour)</p>
                <p>Total game hours: <strong><span id="totalGameHours">24</span> hours</strong> (<span id="numGames">8</span> games × <span id="gameLength">3</span> hours)</p>
                <p>Total program contact hours: <strong><span id="totalProgramHours">32</span> hours</strong></p>
            </div>
            
            <!-- Program Expenses Section -->
            <h2 class="section-title">💸 Program Expenses (For Entire Program)</h2>
            <div class="expenses-section">
                <p style="background: #fff3cd; padding: 12px; border-radius: 8px; margin-bottom: 20px; color: #856404; font-size: 0.95em; line-height: 1.5;">
                    <strong>Note:</strong> Detail out the expenses you want to cover with the coaching fee. If players are purchasing all range or F&B on their own, don't include it here.
                </p>
                <div class="input-section">
                    <div class="input-group">
                        <label for="golfCourseAccess">Golf Course Access</label>
                        <p class="hint-text">Total for entire program</p>
                        <div class="input-wrapper">
                            <span class="currency-symbol">$</span>
                            <input type="number" id="golfCourseAccess" min="0" max="50000" value="500" step="50" class="with-currency">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="rangeAccess">Range Access</label>
                        <p class="hint-text">Total for entire program</p>
                        <div class="input-wrapper">
                            <span class="currency-symbol">$</span>
                            <input type="number" id="rangeAccess" min="0" max="50000" value="300" step="25" class="with-currency">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="teeGifts">Tee Gifts</label>
                        <p class="hint-text">Total for all students</p>
                        <div class="input-wrapper">
                            <span class="currency-symbol">$</span>
                            <input type="number" id="teeGifts" min="0" max="10000" value="250" step="25" class="with-currency">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="prizes">Prizes</label>
                        <p class="hint-text">Program-end awards</p>
                        <div class="input-wrapper">
                            <span class="currency-symbol">$</span>
                            <input type="number" id="prizes" min="0" max="10000" value="200" step="25" class="with-currency">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="snacks">Snacks</label>
                        <p class="hint-text">For entire program</p>
                        <div class="input-wrapper">
                            <span class="currency-symbol">$</span>
                            <input type="number" id="snacks" min="0" max="10000" value="150" step="25" class="with-currency">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="miscellaneous">Miscellaneous</label>
                        <p class="hint-text">Other program expenses</p>
                        <div class="input-wrapper">
                            <span class="currency-symbol">$</span>
                            <input type="number" id="miscellaneous" min="0" max="10000" value="100" step="25" class="with-currency">
                        </div>
                    </div>
                </div>
                <p style="text-align: center; color: #666; margin-top: 15px; font-style: italic;">All expenses are calculated for the entire <span id="programLength">8</span>-week program</p>
            </div>
            
            <!-- Recommended Pricing Section -->
            <h2 class="section-title">💰 Recommended Program Pricing</h2>
            <div class="results-section">
                <div class="results-grid">
                    <div class="result-item highlight">
                        <div class="result-label">Recommended Program Fee</div>
                        <div class="result-value" id="recommendedFee">$600</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Total Coaching Costs</div>
                        <div class="result-value" id="totalCoachingCost">$2,400</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Total Other Expenses</div>
                        <div class="result-value" id="totalOtherExpenses">$1,500</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Break-Even Students</div>
                        <div class="result-value" id="breakEvenStudents">7</div>
                    </div>
                </div>
                
                <div class="breakdown-section">
                    <div class="breakdown-title">Pricing Calculation Breakdown</div>
                    <div class="breakdown-item">
                        <span class="breakdown-label">Total coaching hours (all coaches):</span>
                        <span class="breakdown-value" id="totalCoachingHours">32</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="breakdown-label">Lead coach cost:</span>
                        <span class="breakdown-value" id="leadCoachCost">$2,400</span>
                    </div>
                    <div class="breakdown-item" id="assistantCoachCostRow" style="display: none;">
                        <span class="breakdown-label">Assistant coaches cost:</span>
                        <span class="breakdown-value" id="assistantCoachCost">$0</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="breakdown-label">Coaching cost per student:</span>
                        <span class="breakdown-value" id="coachingPerStudent">$400</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="breakdown-label">Other expenses per student:</span>
                        <span class="breakdown-value" id="otherExpensePerStudent">$250</span>
                    </div>
                    <div class="breakdown-item" style="border-top: 2px solid #1e3a5f; margin-top: 15px; padding-top: 15px;">
                        <span class="breakdown-label" style="font-weight: 600;">Total cost per student:</span>
                        <span class="breakdown-value" id="totalCostPerStudent" style="font-weight: 700;">$650</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="breakdown-label" style="font-weight: 600;">Recommended fee to break even:</span>
                        <span class="breakdown-value" id="breakEvenFee" style="font-weight: 700;">$650</span>
                    </div>
                </div>
            </div>
            
            <!-- Revenue Calculator Section -->
            <h2 class="section-title">💵 Revenue Calculator</h2>
            <div class="input-section">
                <div class="input-group">
                    <label for="actualFee">Your Program Fee per Student</label>
                    <p class="hint-text">Auto-filled with recommended fee (adjust as needed)</p>
                    <div class="input-wrapper">
                        <span class="currency-symbol">$</span>
                        <input type="number" id="actualFee" min="0" max="2000" value="650" step="10" class="with-currency">
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="enrolledStudents">Enrolled Students</label>
                    <p class="hint-text">Auto-filled with break-even number (max: <span id="maxCapacity">6</span>)</p>
                    <div class="input-wrapper">
                        <input type="number" id="enrolledStudents" min="0" max="100" value="6" step="1">
                    </div>
                </div>
            </div>
            
            <!-- Final Revenue Results -->
            <h2 class="section-title">📈 Financial Summary</h2>
            <div class="results-section">
                <div class="results-grid">
                    <div class="result-item">
                        <div class="result-label">Total Revenue</div>
                        <div class="result-value" id="totalRevenue">$3,900</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Total Expenses</div>
                        <div class="result-value" id="totalExpenses" style="color: #ff6b6b;">$3,900</div>
                    </div>
                    <div class="result-item highlight">
                        <div class="result-label">NET PROFIT</div>
                        <div class="result-value" id="netProfit" style="font-size: 2.3em;">$0</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Profit Margin</div>
                        <div class="result-value" id="profitMargin">0%</div>
                    </div>
                </div>
                
                <div class="breakdown-section">
                    <div class="breakdown-title">Per Student Analysis</div>
                    <div class="breakdown-item">
                        <span class="breakdown-label">Revenue per student (program fee):</span>
                        <span class="breakdown-value" id="revenuePerStudent">$650</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="breakdown-label">Coaching cost per student:</span>
                        <span class="breakdown-value" id="coachingCostPerStudent">$400</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="breakdown-label">Other expenses per student:</span>
                        <span class="breakdown-value" id="otherExpensesPerStudent">$250</span>
                    </div>
                    <div class="breakdown-item" style="border-top: 2px solid #1e3a5f; margin-top: 15px; padding-top: 15px;">
                        <span class="breakdown-label" style="font-weight: 600;">Net profit per student:</span>
                        <span class="breakdown-value" id="netPerStudent" style="color: #5cb85c; font-weight: 700;">$0</span>
                    </div>
                </div>
            </div>
            
            <div id="studentWarning" class="warning-box" style="display: none;">
                <strong>⚠️ Over Capacity:</strong> You have enrolled more students than your maximum capacity allows. Consider adding more coaches or an extra practice session by either committing to two hours in a day or adding an extra day. You can split the players up into groups of around 6 and have either a Tuesday/Thursday group or a group come from 3-4pm and another from 4-5pm in the same day.
            </div>
            
            <div id="profitWarning" class="warning-box" style="display: none;">
                <strong>⚠️ Low/Negative Profit:</strong> Your program is not profitable at current pricing. Consider increasing your fee or reducing expenses. The recommended minimum fee to break even is shown above.
            </div>
            
            <!-- Email Results Section -->
            <div class="email-section">
                <h3>📧 Email Your Results</h3>
                <p>Get a copy of your program plan and financial calculations</p>
                
                <div style="margin-top: 20px;">
                    <label for="pgaSection" style="display: block; margin-bottom: 10px; color: #1e3a5f; font-weight: 600;">Select Your PGA Section:</label>
                    <select id="pgaSection" style="max-width: 400px; margin: 0 auto 15px;">
                        <option value="">-- Select Your Section --</option>
                        <option value="Alabama - NW Florida">Alabama - NW Florida</option>
                        <option value="Aloha">Aloha</option>
                        <option value="Carolinas">Carolinas</option>
                        <option value="Central New York">Central New York</option>
                        <option value="Colorado">Colorado</option>
                        <option value="Connecticut">Connecticut</option>
                        <option value="Gateway">Gateway</option>
                        <option value="Georgia">Georgia</option>
                        <option value="Gulf States">Gulf States</option>
                        <option value="Illinois">Illinois</option>
                        <option value="Indiana">Indiana</option>
                        <option value="Kentucky">Kentucky</option>
                        <option value="Metropolitan">Metropolitan</option>
                        <option value="Michigan">Michigan</option>
                        <option value="Middle Atlantic">Middle Atlantic</option>
                        <option value="Midwest">Midwest</option>
                        <option value="New England">New England</option>
                        <option value="New Jersey">New Jersey</option>
                        <option value="North Florida">North Florida</option>
                        <option value="Northeastern New York">Northeastern New York</option>
                        <option value="Northern California">Northern California</option>
                        <option value="Northern Ohio">Northern Ohio</option>
                        <option value="Northern Texas">Northern Texas</option>
                        <option value="Pacific Northwest">Pacific Northwest</option>
                        <option value="Philadelphia">Philadelphia</option>
                        <option value="Rocky Mountain">Rocky Mountain</option>
                        <option value="South Central">South Central</option>
                        <option value="South Florida">South Florida</option>
                        <option value="Southern California">Southern California</option>
                        <option value="Southern Ohio">Southern Ohio</option>
                        <option value="Southern Texas">Southern Texas</option>
                        <option value="Southwest">Southwest</option>
                        <option value="Sun Country">Sun Country</option>
                        <option value="Tennessee">Tennessee</option>
                        <option value="Tri-State">Tri-State</option>
                        <option value="Utah">Utah</option>
                        <option value="Western New York">Western New York</option>
                        <option value="Wisconsin">Wisconsin</option>
                    </select>
                </div>
                
                <div id="pecInfo" style="display: none; margin: 15px auto; padding: 10px; background: #e8f1f8; border-radius: 8px; max-width: 400px;">
                    <p style="color: #1e3a5f; font-size: 0.9em;">
                        <strong>Your PEC:</strong> <span id="pecName"></span><br>
                        <strong>PEC Email:</strong> <span id="pecEmail"></span>
                    </p>
                    <p style="color: #666; font-size: 0.85em; margin-top: 10px;">
                        A copy will be sent to your Player Engagement Consultant
                    </p>
                </div>
                
                <div style="margin-top: 15px;">
                    <input type="email" id="emailAddress" placeholder="Enter your email address" style="max-width: 400px; margin: 0 auto;">
                </div>
                <button class="email-button" onclick="emailResults()">Email My Results</button>
                <p id="emailStatus" style="margin-top: 15px; color: #28a745; display: none;">✓ Results copied to clipboard! Paste into your email client.</p>
            </div>
            
            <!-- Practice Guide Section -->
            <div id="practiceGuide" class="practice-guide">
                <h3>🏌️ Practice Guide for Your <span id="guideWeeks">8</span>-Week Program</h3>
                <div id="practiceContent">
                    <!-- Content will be dynamically inserted here -->
                </div>
            </div>
            
            <div class="info-banner">
                <h3>💡 Program Guidelines</h3>
                <p><strong>Recommended Schedule:</strong> 1 practice day + 1 game day per week provides the ideal balance</p>
                <p><strong>Student-Coach Ratio:</strong> The 6:1 ratio ensures quality instruction while maximizing efficiency</p>
                <p><strong>Program Length:</strong> 8-12 weeks is typical for PGA Jr. League programs</p>
                <p><strong>Pricing Strategy:</strong> The recommended fee covers all your costs (coaching + expenses) to break even. Add profit margin based on your market</p>
            </div>
        </div>
    </div>
    
    <script>
        // PEC Contact Data
        const pecData = {
            "Alabama - NW Florida": { name: "Frank Maynard III, PGA", email: "fmaynard@pgahq.com" },
            "Aloha": { name: "Junko Harkins, PGA", email: "jharkins@pgahq.com" },
            "Carolinas": { name: "Frank Maynard III, PGA", email: "fmaynard@pgahq.com" },
            "Central New York": { name: "Brian Bain, PGA", email: "bbain@pgahq.com" },
            "Colorado": { name: "Peter Weisel, PGA", email: "pweisel@pgahq.com" },
            "Connecticut": { name: "Brian Bain, PGA", email: "bbain@pgahq.com" },
            "Gateway": { name: "Ginger Brown Lemm, PGA", email: "gblemm@pgahq.com" },
            "Georgia": { name: "Lauren Court", email: "lcourt@pgahq.com" },
            "Gulf States": { name: "Ginger Brown Lemm, PGA", email: "gblemm@pgahq.com" },
            "Illinois": { name: "Stacey Rice-Dorman, PGA", email: "srice@pgahq.com" },
            "Indiana": { name: "Stacey Rice-Dorman, PGA", email: "srice@pgahq.com" },
            "Kentucky": { name: "Chelsea Guoynes, PGA", email: "crguoynes@pgahq.com" },
            "Metropolitan": { name: "Mike Smith, PGA", email: "msmith@pgahq.com" },
            "Michigan": { name: "Stacey Rice-Dorman, PGA", email: "srice@pgahq.com" },
            "Middle Atlantic": { name: "Chelsea Guoynes, PGA", email: "crguoynes@pgahq.com" },
            "Midwest": { name: "Ginger Brown Lemm, PGA", email: "gblemm@pgahq.com" },
            "New England": { name: "Brian Bain, PGA", email: "bbain@pgahq.com" },
            "New Jersey": { name: "Mike Smith, PGA", email: "msmith@pgahq.com" },
            "North Florida": { name: "Lauren Court", email: "lcourt@pgahq.com" },
            "Northeastern New York": { name: "Brian Bain, PGA", email: "bbain@pgahq.com" },
            "Northern California": { name: "Junko Harkins, PGA", email: "jharkins@pgahq.com" },
            "Northern Ohio": { name: "Kim Shafer, PGA/LPGA", email: "kshafer@pgahq.com" },
            "Northern Texas": { name: "Becca Bailey", email: "rbailey@pgahq.com" },
            "Pacific Northwest": { name: "Patrick Oropallo, PGA", email: "poropallo@pgahq.com" },
            "Philadelphia": { name: "Mike Smith, PGA", email: "msmith@pgahq.com" },
            "Rocky Mountain": { name: "Peter Weisel, PGA", email: "pweisel@pgahq.com" },
            "South Central": { name: "Ginger Brown Lemm, PGA", email: "gblemm@pgahq.com" },
            "South Florida": { name: "Lauren Court", email: "lcourt@pgahq.com" },
            "Southern California": { name: "Junko Harkins, PGA", email: "jharkins@pgahq.com" },
            "Southern Ohio": { name: "Kim Shafer, PGA/LPGA", email: "kshafer@pgahq.com" },
            "Southern Texas": { name: "Becca Bailey", email: "rbailey@pgahq.com" },
            "Southwest": { name: "Patrick Oropallo, PGA", email: "poropallo@pgahq.com" },
            "Sun Country": { name: "Becca Bailey", email: "rbailey@pgahq.com" },
            "Tennessee": { name: "Frank Maynard III, PGA", email: "fmaynard@pgahq.com" },
            "Tri-State": { name: "Kim Shafer, PGA/LPGA", email: "kshafer@pgahq.com" },
            "Utah": { name: "Peter Weisel, PGA", email: "pweisel@pgahq.com" },
            "Western New York": { name: "Mike Smith, PGA", email: "msmith@pgahq.com" },
            "Wisconsin": { name: "Kim Shafer, PGA/LPGA", email: "kshafer@pgahq.com" }
        };
        
        // Track assistant coaches
        let assistantCoaches = [];
        let assistantCoachIdCounter = 0;
        
        // Get all input elements
        const studentRatio = document.getElementById('studentRatio');
        const leadCoachRate = document.getElementById('leadCoachRate');
        const practiceDuration = document.getElementById('practiceDuration');
        const gameDuration = document.getElementById('gameDuration');
        const totalPractices = document.getElementById('totalPractices');
        const totalGameDays = document.getElementById('totalGameDays');
        const weeksInProgram = document.getElementById('weeksInProgram');
        const onlinePayment = document.getElementById('onlinePayment');
        const actualFee = document.getElementById('actualFee');
        const enrolledStudents = document.getElementById('enrolledStudents');
        
        // Expense inputs
        const golfCourseAccess = document.getElementById('golfCourseAccess');
        const rangeAccess = document.getElementById('rangeAccess');
        const teeGifts = document.getElementById('teeGifts');
        const prizes = document.getElementById('prizes');
        const snacks = document.getElementById('snacks');
        const miscellaneous = document.getElementById('miscellaneous');
        
        // Practice guides content
        const practiceGuides = {
            4: [
                { week: "Week 1", description: "Make day 1 fun! Introduce the idea of the team format by having players go through skills and drills in pairs. You may want to start with a drive, chip & putt skill assessment to see where the players are starting." },
                { week: "Week 2", description: "Take the players on course & play 1-3 holes" },
                { week: "Week 3", description: "Work on drive/full swing" },
                { week: "Week 4", description: "Work on putting & chipping" }
            ],
            6: [
                { week: "Week 1", description: "Make day 1 fun! Introduce the idea of the team format by having players go through skills and drills in pairs. You may want to start with a drive, chip & putt skill assessment to see where the players are starting." },
                { week: "Week 2", description: "Take the players on course & play 1-3 holes" },
                { week: "Week 3", description: "Work on drive/full swing" },
                { week: "Week 4", description: "Work on putting & chipping" },
                { week: "Week 5", description: "Work on course management & club selection on course" },
                { week: "Week 6", description: "Work on putting speed & how to play in pairs & work together is key" }
            ],
            8: [
                { week: "Week 1", description: "Make day 1 fun! Introduce the idea of the team format by having players go through skills and drills in pairs. You may want to start with a drive, chip & putt skill assessment to see where the players are starting." },
                { week: "Week 2", description: "Take the players on course & play 1-3 holes" },
                { week: "Week 3", description: "Work on drive/full swing" },
                { week: "Week 4", description: "Work on putting & chipping" },
                { week: "Week 5", description: "Work on course management & club selection on course" },
                { week: "Week 6", description: "Work on full swing again but focus on irons" },
                { week: "Week 7", description: "Work on putting speed" },
                { week: "Week 8", description: "How to play in pairs & work together is key - things like if you're player #1 for the pair your role is to hit a safe shot so player #2 can go for it, and if player #1 hits an errant shot, player #2 needs to hit a safer shot" }
            ],
            12: [
                { week: "Week 1", description: "Make day 1 fun! Introduce the idea of the team format by having players go through skills and drills in pairs. You may want to start with a drive, chip & putt skill assessment to see where the players are starting." },
                { week: "Week 2", description: "Take the players on course & play 1-3 holes" },
                { week: "Week 3", description: "Work on drive/full swing" },
                { week: "Week 4", description: "Work on putting & chipping" },
                { week: "Week 5", description: "Work on course management & club selection on course" },
                { week: "Week 6", description: "Work on full swing again but focus on irons" },
                { week: "Week 7", description: "Work on putting speed" },
                { week: "Week 8", description: "Bunkers" },
                { week: "Week 9", description: "How to play in pairs & work together is key - things like if you're player #1 for the pair your role is to hit a safe shot so player #2 can go for it, and if player #1 hits an errant shot, player #2 needs to hit a safer shot" },
                { week: "Week 10", description: "Go back on course and play 1-3 holes to practice playing in pairs" },
                { week: "Week 11", description: "Chip & pitch with other clubs than a lob wedge" },
                { week: "Week 12", description: "End with a drive, chip & putt skill assessment to see how the players improved and see where they may still need some practice" }
            ]
        };
        
        // Add assistant coach function
        function addAssistantCoach() {
            const id = assistantCoachIdCounter++;
            const coachDiv = document.createElement('div');
            coachDiv.id = `coach-${id}`;
            coachDiv.style.marginBottom = '10px';
            coachDiv.innerHTML = `
                <input type="number" id="assistantRate-${id}" placeholder="Hourly rate" min="0" max="500" step="5" style="width: 150px; margin-right: 10px;">
                <span>$ per hour</span>
                <button class="remove-coach-btn" onclick="removeAssistantCoach(${id})">Remove</button>
            `;
            document.getElementById('assistantCoachesList').appendChild(coachDiv);
            
            // Add event listener to new input
            document.getElementById(`assistantRate-${id}`).addEventListener('input', function() {
                calculateAll(true);
            });
            
            assistantCoaches.push({ id: id, rate: 0 });
            calculateAll(true);
        }
        
        // Remove assistant coach function
        function removeAssistantCoach(id) {
            document.getElementById(`coach-${id}`).remove();
            assistantCoaches = assistantCoaches.filter(coach => coach.id !== id);
            calculateAll(true);
        }
        
        // Update practice guide
        function updatePracticeGuide() {
            const weeks = parseInt(weeksInProgram.value) || 8;
            const guideWeeksElement = document.getElementById('guideWeeks');
            const practiceContent = document.getElementById('practiceContent');
            
            guideWeeksElement.textContent = weeks;
            
            // Find the closest guide
            let guideToUse = null;
            if (weeks <= 4) {
                guideToUse = practiceGuides[4];
            } else if (weeks <= 6) {
                guideToUse = practiceGuides[6];
            } else if (weeks <= 8) {
                guideToUse = practiceGuides[8];
            } else {
                guideToUse = practiceGuides[12];
            }
            
            // Clear existing content
            practiceContent.innerHTML = '';
            
            // Add week items
            guideToUse.forEach(item => {
                const weekDiv = document.createElement('div');
                weekDiv.className = 'week-item';
                weekDiv.innerHTML = `
                    <div class="week-title">${item.week}</div>
                    <div class="week-description">${item.description}</div>
                `;
                practiceContent.appendChild(weekDiv);
            });
            
            // Add resource links at the end
            const resourceLinks = document.createElement('div');
            resourceLinks.style.cssText = 'margin-top: 30px; padding: 20px; background: #e8f1f8; border-radius: 10px;';
            resourceLinks.innerHTML = `
                <h4 style="color: #1e3a5f; margin-bottom: 20px; text-align: center;">Additional Resources</h4>
                <div style="display: grid; grid-template-columns: 1fr; gap: 15px; max-width: 600px; margin: 0 auto;">
                    <a href="https://my.pga.com/pga-coach/training-resources/activity-plans" 
                       target="_blank" 
                       style="display: block; padding: 20px; background: linear-gradient(135deg, #1e3a5f, #2c5282); color: white; text-decoration: none; border-radius: 10px; text-align: center; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 10px rgba(0,0,0,0.2);"
                       onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 15px rgba(0,0,0,0.3)';"
                       onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 10px rgba(0,0,0,0.2)';">
                       📚 Need help with activity ideas?<br>Check out the activities on PGA.coach
                    </a>
                    <a href="https://resources.pga.org/increase-revenue/player-engagement/pga-player-engagement-consultants" 
                       target="_blank" 
                       style="display: block; padding: 20px; background: linear-gradient(135deg, #1e3a5f, #2c5282); color: white; text-decoration: none; border-radius: 10px; text-align: center; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 10px rgba(0,0,0,0.2);"
                       onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 15px rgba(0,0,0,0.3)';"
                       onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 10px rgba(0,0,0,0.2)';">
                       💬 Connect with your Player Engagement Consultant<br>to talk through any programming ideas
                    </a>
                </div>
            `;
            practiceContent.appendChild(resourceLinks);
        }
        
        // Add event listeners
        function addEventListeners() {
            // All inputs except actualFee and enrolledStudents
            const planningInputs = [
                studentRatio, leadCoachRate, practiceDuration, gameDuration,
                totalPractices, totalGameDays, weeksInProgram, onlinePayment,
                golfCourseAccess, rangeAccess, teeGifts, prizes, snacks, miscellaneous
            ];
            
            planningInputs.forEach(input => {
                input.addEventListener('input', function() {
                    calculateAll(true); // true means update the recommendations
                });
            });
            
            // Special handling for actualFee and enrolledStudents - they don't trigger auto-updates
            actualFee.addEventListener('input', function() {
                calculateAll(false); // false means don't update recommendations
            });
            
            enrolledStudents.addEventListener('input', function() {
                calculateAll(false); // false means don't update recommendations
            });
            
            // Special listener for weeks to update practice guide
            weeksInProgram.addEventListener('input', updatePracticeGuide);
            
            // Section selector listener
            const sectionSelector = document.getElementById('pgaSection');
            sectionSelector.addEventListener('change', function() {
                const pecInfo = document.getElementById('pecInfo');
                const selectedSection = this.value;
                
                if (selectedSection && pecData[selectedSection]) {
                    const pec = pecData[selectedSection];
                    document.getElementById('pecName').textContent = pec.name;
                    document.getElementById('pecEmail').textContent = pec.email;
                    pecInfo.style.display = 'block';
                } else {
                    pecInfo.style.display = 'none';
                }
            });
        }
        
        // Format currency
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }
        
        // Format hours
        function formatHours(hours) {
            const wholeHours = Math.floor(hours);
            const minutes = Math.round((hours - wholeHours) * 60);
            if (minutes === 0) {
                return wholeHours === 1 ? '1 hour' : `${wholeHours} hours`;
            }
            if (wholeHours === 0) {
                return `${minutes} min`;
            }
            return `${wholeHours} hr ${minutes} min`;
        }
        
        // Email results function
        function emailResults() {
            const emailAddress = document.getElementById('emailAddress').value;
            if (!emailAddress) {
                alert('Please enter your email address');
                return;
            }
            
            // Get selected section and PEC info
            const selectedSection = document.getElementById('pgaSection').value;
            let pecEmail = '';
            let pecName = '';
            
            if (selectedSection && pecData[selectedSection]) {
                pecEmail = pecData[selectedSection].email;
                pecName = pecData[selectedSection].name;
            }
            
            // Gather all the data
            const weeks = document.getElementById('weeksInProgram').value;
            const revenue = document.getElementById('totalRevenue').textContent;
            const expenses = document.getElementById('totalExpenses').textContent;
            const netProfit = document.getElementById('netProfit').textContent;
            const recommendedFee = document.getElementById('recommendedFee').textContent;
            const students = document.getElementById('enrolledStudents').value;
            
            // Get the appropriate practice guide
            let guideToUse = null;
            const weeksNum = parseInt(weeks);
            if (weeksNum <= 4) {
                guideToUse = practiceGuides[4];
            } else if (weeksNum <= 6) {
                guideToUse = practiceGuides[6];
            } else if (weeksNum <= 8) {
                guideToUse = practiceGuides[8];
            } else {
                guideToUse = practiceGuides[12];
            }
            
            // Build practice guide text
            let practiceGuideText = `\nPRACTICE GUIDE FOR ${weeks}-WEEK PROGRAM:\n`;
            practiceGuideText += '================================\n';
            guideToUse.forEach(item => {
                practiceGuideText += `\n${item.week}:\n${item.description}\n`;
            });
            
            // Add resource links
            practiceGuideText += '\n\nADDITIONAL RESOURCES:\n';
            practiceGuideText += '================================\n';
            practiceGuideText += '\nNeed help with activity ideas? Check out the activities on PGA.coach:\n';
            practiceGuideText += 'https://my.pga.com/pga-coach/training-resources/activity-plans\n';
            practiceGuideText += '\nConnect with your Player Engagement Consultant to talk through any programming ideas:\n';
            practiceGuideText += 'https://resources.pga.org/increase-revenue/player-engagement/pga-player-engagement-consultants\n';
            
            // Create email content
            const subject = `PGA Jr. League Program Plan - ${weeks} Week Program${selectedSection ? ' - ' + selectedSection : ''}`;
            const body = `
PGA JR. LEAGUE PROGRAM SUMMARY
================================

${selectedSection ? `PGA SECTION: ${selectedSection}\n` : ''}${pecName ? `PLAYER ENGAGEMENT CONSULTANT: ${pecName}\n` : ''}
PROGRAM DETAILS:
- Program Length: ${weeks} weeks
- Maximum Capacity: ${document.getElementById('maxStudents').textContent} students
- Enrolled Students: ${students}
- Total Practices: ${document.getElementById('totalPractices').value}
- Total Game Days: ${document.getElementById('totalGameDays').value}

FINANCIAL SUMMARY:
- Recommended Program Fee: ${recommendedFee}
- Your Program Fee: ${document.getElementById('actualFee').value}
- Total Revenue: ${revenue}
- Total Expenses: ${expenses}
- Net Profit: ${netProfit}
- Profit Margin: ${document.getElementById('profitMargin').textContent}

SCHEDULE:
- Practice Duration: ${formatHours(parseFloat(practiceDuration.value))}
- Game Duration: ${formatHours(parseFloat(gameDuration.value))}
- Total Program Hours: ${document.getElementById('totalProgramHours').textContent}

${practiceGuideText}

PROGRAM NOTES:
- Recommended student-coach ratio: 6:1
- Consider splitting larger groups into multiple teams

Visit the calculator to adjust your planning and see updated recommendations.
            `;
            
            // Copy to clipboard
            const fullText = `Subject: ${subject}\n\n${body}`;
            navigator.clipboard.writeText(fullText).then(function() {
                document.getElementById('emailStatus').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('emailStatus').style.display = 'none';
                }, 5000);
            });
            
            // Create mailto link with CC to PEC if selected
            let mailto = `mailto:${emailAddress}`;
            if (pecEmail) {
                mailto += `?cc=${pecEmail}&subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            } else {
                mailto += `?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            }
            
            window.location.href = mailto;
        }
        
        // Calculate everything
        function calculateAll(updateRecommendations = false) {
            // Get values
            const ratio = parseInt(studentRatio.value) || 1;
            const leadRate = parseFloat(leadCoachRate.value) || 0;
            const practiceDur = parseFloat(practiceDuration.value) || 1;
            const gameDur = parseFloat(gameDuration.value) || 3;
            const practices = parseInt(totalPractices.value) || 0;
            const games = parseInt(totalGameDays.value) || 0;
            const weeks = parseInt(weeksInProgram.value) || 0;
            const fee = parseFloat(actualFee.value) || 0;
            const students = parseInt(enrolledStudents.value) || 0;
            
            // Update assistant coach rates from inputs
            assistantCoaches.forEach(coach => {
                const rateInput = document.getElementById(`assistantRate-${coach.id}`);
                if (rateInput) {
                    coach.rate = parseFloat(rateInput.value) || 0;
                }
            });
            
            // Calculate total coaches
            const totalCoaches = 1 + assistantCoaches.length;
            
            // Update program length display
            document.getElementById('programLength').textContent = weeks;
            
            // Calculate max capacity
            const maxStudentCapacity = totalCoaches * ratio;
            
            // Calculate hours
            const totalPracticeHours = practices * practiceDur;
            const totalGameHours = games * gameDur;
            const totalProgramContactHours = totalPracticeHours + totalGameHours;
            
            // Calculate coaching costs
            const leadCoachCost = totalProgramContactHours * leadRate;
            let assistantCoachesTotalCost = 0;
            assistantCoaches.forEach(coach => {
                assistantCoachesTotalCost += totalProgramContactHours * coach.rate;
            });
            const totalCoachingCost = leadCoachCost + assistantCoachesTotalCost;
            const coachingCostPerStudent = maxStudentCapacity > 0 ? totalCoachingCost / maxStudentCapacity : 0;
            
            // Calculate other expenses (all for the program)
            const golfCourse = parseFloat(golfCourseAccess.value) || 0;
            const range = parseFloat(rangeAccess.value) || 0;
            const gifts = parseFloat(teeGifts.value) || 0;
            const prizeCost = parseFloat(prizes.value) || 0;
            const snackCost = parseFloat(snacks.value) || 0;
            const miscCost = parseFloat(miscellaneous.value) || 0;
            
            const otherExpenses = golfCourse + range + gifts + prizeCost + snackCost + miscCost;
            const otherExpensesPerStudent = maxStudentCapacity > 0 ? otherExpenses / maxStudentCapacity : 0;
            
            // Calculate recommended fee (just covering costs, no markup)
            const totalCostPerStudent = coachingCostPerStudent + otherExpensesPerStudent;
            const recommendedStudentFee = totalCostPerStudent;
            
            // Handle online payment processing
            const isOnlinePayment = onlinePayment.value === 'yes';
            const processingFeeNotice = document.getElementById('processingFeeNotice');
            
            if (isOnlinePayment) {
                processingFeeNotice.style.display = 'block';
                // Calculate 3% processing fee adjustment
                const adjustedFee = Math.ceil(recommendedStudentFee / 0.97); // Divide by 0.97 to add 3% that will be taken
                const processingCost = adjustedFee * 0.03;
                const totalProcessingCost = processingCost * maxStudentCapacity;
                
                document.getElementById('adjustedFeeAmount').textContent = formatCurrency(adjustedFee);
                document.getElementById('originalFeeAmount').textContent = formatCurrency(recommendedStudentFee);
                document.getElementById('processingCostAmount').textContent = formatCurrency(totalProcessingCost);
                
                // Use adjusted fee if online payment is selected
                if (updateRecommendations) {
                    actualFee.value = Math.round(adjustedFee);
                }
            } else {
                processingFeeNotice.style.display = 'none';
                // Use regular fee if no online payment
                if (updateRecommendations) {
                    actualFee.value = Math.round(recommendedStudentFee);
                }
            }
            
            // Calculate total expenses for all costs
            const totalAllExpenses = totalCoachingCost + otherExpenses;
            
            // Break-even calculation
            const breakEvenStudents = recommendedStudentFee > 0 ? Math.ceil(totalAllExpenses / recommendedStudentFee) : 0;
            
            // Calculate actual revenue and expenses based on enrollment
            const actualCoachingCost = students > 0 && maxStudentCapacity > 0 ? 
                Math.min((students / maxStudentCapacity), 1) * totalCoachingCost : 
                totalCoachingCost;
            const totalExpenses = actualCoachingCost + otherExpenses;
            
            // Calculate revenue
            const totalRevenue = fee * students;
            const netProfit = totalRevenue - totalExpenses;
            const profitMargin = totalRevenue > 0 ? (netProfit / totalRevenue * 100) : 0;
            
            // Per student calculations for actual enrollment
            const actualOtherExpensesPerStudent = students > 0 ? otherExpenses / students : 0;
            const actualCoachingCostPerStudent = students > 0 ? actualCoachingCost / students : 0;
            const netProfitPerStudent = students > 0 ? netProfit / students : 0;
            
            // Update capacity info
            document.getElementById('maxStudents').textContent = maxStudentCapacity;
            document.getElementById('numCoachesDisplay').textContent = totalCoaches;
            document.getElementById('ratioDisplay').textContent = ratio;
            document.getElementById('totalPracticeHours').textContent = totalPracticeHours.toFixed(1);
            document.getElementById('numPractices').textContent = practices;
            document.getElementById('practiceLength').textContent = formatHours(practiceDur);
            document.getElementById('totalGameHours').textContent = totalGameHours.toFixed(1);
            document.getElementById('numGames').textContent = games;
            document.getElementById('gameLength').textContent = formatHours(gameDur);
            document.getElementById('totalProgramHours').textContent = totalProgramContactHours.toFixed(1);
            document.getElementById('maxCapacity').textContent = maxStudentCapacity;
            
            // Update recommended pricing
            document.getElementById('recommendedFee').textContent = formatCurrency(recommendedStudentFee);
            document.getElementById('totalCoachingCost').textContent = formatCurrency(totalCoachingCost);
            document.getElementById('totalOtherExpenses').textContent = formatCurrency(otherExpenses);
            document.getElementById('breakEvenStudents').textContent = breakEvenStudents;
            
            // Update breakdown
            document.getElementById('totalCoachingHours').textContent = (totalProgramContactHours * totalCoaches).toFixed(1);
            document.getElementById('leadCoachCost').textContent = formatCurrency(leadCoachCost);
            
            // Show/hide assistant coach cost row
            if (assistantCoaches.length > 0) {
                document.getElementById('assistantCoachCostRow').style.display = 'flex';
                document.getElementById('assistantCoachCost').textContent = formatCurrency(assistantCoachesTotalCost);
            } else {
                document.getElementById('assistantCoachCostRow').style.display = 'none';
            }
            
            document.getElementById('coachingPerStudent').textContent = formatCurrency(coachingCostPerStudent);
            document.getElementById('otherExpensePerStudent').textContent = formatCurrency(otherExpensesPerStudent);
            document.getElementById('totalCostPerStudent').textContent = formatCurrency(totalCostPerStudent);
            document.getElementById('breakEvenFee').textContent = formatCurrency(recommendedStudentFee);
            
            // Update final results
            document.getElementById('totalRevenue').textContent = formatCurrency(totalRevenue);
            document.getElementById('totalExpenses').textContent = formatCurrency(totalExpenses);
            document.getElementById('netProfit').textContent = formatCurrency(netProfit);
            document.getElementById('profitMargin').textContent = profitMargin.toFixed(0) + '%';
            
            // Update per student analysis
            document.getElementById('revenuePerStudent').textContent = formatCurrency(fee);
            document.getElementById('coachingCostPerStudent').textContent = formatCurrency(actualCoachingCostPerStudent);
            document.getElementById('otherExpensesPerStudent').textContent = formatCurrency(actualOtherExpensesPerStudent);
            document.getElementById('netPerStudent').textContent = formatCurrency(netProfitPerStudent);
            
            // Auto-populate recommended values ONLY when updateRecommendations is true
            if (updateRecommendations && !isOnlinePayment) {
                actualFee.value = Math.round(recommendedStudentFee);
                enrolledStudents.value = Math.min(breakEvenStudents, maxStudentCapacity);
            } else if (updateRecommendations && isOnlinePayment) {
                // Already handled above in online payment section
                enrolledStudents.value = Math.min(breakEvenStudents, maxStudentCapacity);
            }
            
            // Show/hide warnings
            const studentWarning = document.getElementById('studentWarning');
            const profitWarning = document.getElementById('profitWarning');
            
            if (students > maxStudentCapacity) {
                studentWarning.style.display = 'block';
            } else {
                studentWarning.style.display = 'none';
            }
            
            if (netProfit < 0) {
                profitWarning.style.display = 'block';
            } else {
                profitWarning.style.display = 'none';
            }
            
            // Update net profit color
            const netProfitElement = document.getElementById('netProfit');
            if (netProfit < 0) {
                netProfitElement.style.color = '#ff6b6b';
            } else {
                netProfitElement.style.color = 'white';
            }
        }
        
        // Initialize
        function init() {
            addEventListeners();
            updatePracticeGuide();
            calculateAll(true); // true to set initial recommendations
        }
        
        // Run on load
        init();
    </script>
</body>
</html>
